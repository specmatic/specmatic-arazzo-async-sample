asyncapi: 3.0.0

info:
  title: Simple Order API
  version: "1.0.0"

servers:
  localKafka:
    host: localhost:9092
    protocol: kafka

channels:
  place-order:
    address: place-order
    messages:
      placeOrder.message:
        $ref: "#/components/messages/OrderRequest"

  receive-order:
    address: receive-order
    messages:
      receiveOrder.message:
        $ref: "#/components/messages/OrderResponse"

operations:
  PlaceOrder:
    description: Place an order
    action: receive
    channel:
      $ref: "#/channels/place-order"
    messages:
      - $ref: "#/channels/place-order/messages/placeOrder.message"
    reply:
      channel:
        $ref: "#/channels/receive-order"
      messages:
        - $ref: "#/channels/receive-order/messages/receiveOrder.message"

components:
  messages:
    OrderRequest:
      contentType: application/json
      payload:
        type: object
        required:
          - productId
          - quantity
        properties:
          productId:
            type: integer
          quantity:
            type: integer
    OrderResponse:
      contentType: application/json
      payload:
        type: object
        required:
          - orderId
        properties:
          orderId:
            type: integer
